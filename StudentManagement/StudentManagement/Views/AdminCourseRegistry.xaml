<UserControl
    x:Class="StudentManagement.Views.AdminCourseRegistry"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:component="clr-namespace:StudentManagement.Components"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:StudentManagement.Views"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:math="http://hexinnovation.com/math"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:utils="clr-namespace:StudentManagement.Utils"
    xmlns:views="clr-namespace:StudentManagement.Views"
    d:DesignHeight="{Binding Source={x:Static SystemParameters.PrimaryScreenHeight}, Converter={utils:RatioConverter}, ConverterParameter='0.84'}"
    d:DesignWidth="{Binding Source={x:Static SystemParameters.PrimaryScreenWidth}, Converter={utils:RatioConverter}, ConverterParameter='0.49'}"
    Background="{StaticResource CenterColumn}"
    FontFamily="{DynamicResource MaterialDesignFont}"
    TextElement.FontSize="13"
    TextElement.FontWeight="Regular"
    TextElement.Foreground="{DynamicResource MaterialDesignBody}"
    TextOptions.TextFormattingMode="Ideal"
    TextOptions.TextRenderingMode="Auto"
    mc:Ignorable="d">
    <UserControl.Resources>
        <math:MathConverter
            x:Key="math" />
    </UserControl.Resources>
    <ScrollViewer>
        <materialDesign:DialogHost
            CloseOnClickAway="True">
            <!--
            <materialDesign:DialogHost.DialogContent>
                <ContentControl Content="{Binding DialogItemViewModel}" DataContext="{DynamicResource AdminCourseRegistryVM}">
                    <ContentControl.Resources>
                        <DataTemplate DataType="{x:Type viewmodels:CreateNewCourseViewModel}">
                            <component:NewNotification Width="600" Height="500" />
                        </DataTemplate>
                    </ContentControl.Resources>
                </ContentControl>
            </materialDesign:DialogHost.DialogContent>
            -->
            <StackPanel
                Margin="8">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition
                            Width="auto" />
                        <ColumnDefinition
                            Width="auto" />
                        <ColumnDefinition
                            Width="*" />
                    </Grid.ColumnDefinitions>
                    <ComboBox
                        x:Name="cbSemester"
                        Grid.Column="0"
                        Width="300"
                        Height="36"
                        Margin="8,8"
                        Padding="4"
                        HorizontalAlignment="Left"
                        materialDesign:HintAssist.Hint="Chọn học kỳ"
                        materialDesign:ComboBoxAssist.ShowSelectedItem="True"
                        BorderBrush="Gray"
                        DockPanel.Dock="Top"
                        FontSize="16"
                        Foreground="#01579b"
                        ItemsSource="{Binding Semesters}"
                        SelectedIndex="{Binding SelectedSemesterIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        SelectedItem="{Binding SelectedSemester, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        Style="{StaticResource MaterialDesignComboBox}">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock>
                                    <TextBlock.Text>
                                        <MultiBinding
                                            Converter="{StaticResource math}"
                                            ConverterParameter="format(&quot;{0}, {1}&quot;, x, y)">
                                            <Binding
                                                Path="Batch" />
                                            <Binding
                                                Path="DisplayName" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <TextBlock
                        Grid.Column="1"
                        Margin="8"
                        VerticalAlignment="Center"
                        Text="Trạng thái" />
                    <TextBlock
                        Grid.Column="2"
                        Margin="8"
                        VerticalAlignment="Center"
                        FontWeight="Bold"
                        Foreground="{Binding ElementName=cbSemester, Path=SelectedItem.CourseRegisterStatus, Converter={StaticResource math}, ConverterParameter='format((x == 0 ? &quot;Red&quot; : &quot;Green&quot;), x)'}"
                        Text="{Binding ElementName=cbSemester, Path=SelectedItem.CourseRegisterStatus, Converter={StaticResource math}, ConverterParameter='format((x == 0 ? &quot;Chưa mở&quot; : &quot;Đã mở&quot;), x)'}" />
                </Grid>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition
                            Width="*" />
                        <ColumnDefinition
                            Width="auto" />
                    </Grid.ColumnDefinitions>
                    <component:SearchBarOne
                        Grid.Column="0"
                        DataContext="{DynamicResource AdminCourseRegistryVM}"
                        FirstSearchButtonText="Mã lớp"
                        SearchCommand="{Binding SearchCourseRegistryItems}"
                        SearchQuery="{Binding SearchQuery, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        SecondSearchButtonText="Tên lớp học" />
                </Grid>
                <DockPanel
                    LastChildFill="False">
                    <Button
                        DockPanel.Dock="Right"
                        Height="50"
                        Width="150"
                        Margin="16,0,0,0"
                        Content="Xuất ra Excel"
                        FontSize="16" />
                    <Button
                        DockPanel.Dock="Right"
                        Height="50"
                        Width="150"
                        Margin="16,0,0,0"
                        Content="Thêm từ Excel"
                        FontSize="16" />
                    <Button
                        DockPanel.Dock="Left"
                        Height="50"
                        Width="150"
                        Margin="16,0,0,0"
                        Content="Thêm thủ công"
                        FontSize="16" />
                    <Button
                        DockPanel.Dock="Left"
                        Height="50"
                        Width="150"
                        Margin="16,0,0,0"
                        Content="Xóa"
                        FontSize="16" />
                </DockPanel>
                <component:SubjectRegistryDataGrid
                    Data="{Binding CourseRegistryItemsDisplay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    IsAllItemsSelected="{Binding IsAllItemsSelected, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                <DockPanel
                    LastChildFill="False">
                    <Button
                        DockPanel.Dock="Right"
                        Height="50"
                        Width="150"
                        Margin="16,0,0,0"
                        Content="Làm mới"
                        FontSize="16" />
                    <Button
                        DockPanel.Dock="Right"
                        Height="50"
                        Width="150"
                        Margin="16,0,0,0"
                        Content="Lưu vào server"
                        FontSize="16" />
                </DockPanel>
            </StackPanel>
        </materialDesign:DialogHost>
    </ScrollViewer>
</UserControl>
